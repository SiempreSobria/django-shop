{% extends "shop/base.html" %}
{% load static %}

{% block content %}

<!-- –ë–∞–Ω–Ω–µ—Ä —Ç–æ–ª—å–∫–æ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π -->
{% if not category %}
<div class="bg-success text-white py-5 mb-5">
  <div class="container">
    <div class="row align-items-center">
      
      <div class="col-lg-6">
        <h1 class="display-5 fw-bold mb-4">–ê–ª—Ç–∞–π—Å–∫–∏–µ —Ç–æ–≤–∞—Ä—ã</h1>
        <p class="lead mb-3">
          –ù–∞—Ç—É—Ä–∞–ª—å–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã —Å –ê–ª—Ç–∞—è –¥–ª—è –≤–∞—à–µ–≥–æ –∑–¥–æ—Ä–æ–≤—å—è –∏ –±–ª–∞–≥–æ–ø–æ–ª—É—á–∏—è
        </p>
        <p class="mb-4">
          –ú—ã –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º —Ç–æ–ª—å–∫–æ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã, —Å–æ–±—Ä–∞–Ω–Ω—ã–µ –≤ —ç–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∏ —á–∏—Å—Ç—ã—Ö —Ä–µ–≥–∏–æ–Ω–∞—Ö –ê–ª—Ç–∞—è.
        </p>

        <div class="d-flex gap-3 flex-wrap">
          <span class="badge bg-light text-success fs-6">üçØ –ù–∞—Ç—É—Ä–∞–ª—å–Ω—ã–π –º–µ–¥</span>
          <span class="badge bg-light text-success fs-6">üåø –õ–µ–∫–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ç—Ä–∞–≤—ã</span>
          <span class="badge bg-light text-success fs-6">ü´ê –ê–ª—Ç–∞–π—Å–∫–∏–µ —è–≥–æ–¥—ã</span>
        </div>
      </div>

      <div class="col-lg-6 text-center">
        <img src="{% static 'shop/altai_nature.jpg' %}"
             class="img-fluid rounded shadow"
             alt="–ê–ª—Ç–∞–π—Å–∫–∞—è –ø—Ä–∏—Ä–æ–¥–∞"
             style="max-height: 300px; object-fit: cover;">
      </div>

    </div>
  </div>
</div>
{% endif %}

<div class="container">

  <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
  <div class="row align-items-center mb-4">
    <div class="col-md-8">
      <h2 class="h3 mb-1">
        {% if category %}
          {{ category.name }}
          {% if category.description %}
            <small class="text-muted d-block mt-2">{{ category.description }}</small>
          {% endif %}
        {% else %}
          –í—Å–µ —Ç–æ–≤–∞—Ä—ã
        {% endif %}
      </h2>
    </div>

    <div class="col-md-4 text-md-end">
      <small class="text-muted">–¢–æ–≤–∞—Ä–æ–≤: {{ products|length }}</small>
    </div>
  </div>

  <!-- –°–µ—Ç–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ -->
  {% if products %}
  <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-4">

    {% for product in products %}
    <div class="col">
      <div class="card h-100 shadow-sm product-card">

        <a href="{% url 'product_detail' product.slug %}">
          <div class="product-image-container">
            {% if product.image %}
              <img src="{{ product.image.url }}" class="product-image" alt="{{ product.title }}">
            {% else %}
              <img src="{% static 'shop/no_image.png' %}" class="product-image" alt="–ù–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è">
            {% endif %}
          </div>
        </a>

        <div class="card-body d-flex flex-column">

          <a href="{% url 'product_detail' product.slug %}"
             class="text-decoration-none text-dark">
            <h6 class="product-title">{{ product.title }}</h6>
          </a>

          {% if product.category %}
          <span class="badge bg-light text-dark small">
            {{ product.category.name }}
          </span>
          {% endif %}

          <div class="product-price mt-2">
            <span class="text-success fw-bold">{{ product.price }} ‚ÇΩ</span>
          </div>

          <div class="mt-auto">
  <a href="{% url 'product_detail' product.slug %}"
     class="btn btn-outline-primary btn-sm w-100 mb-2">
    –ü–æ–¥—Ä–æ–±–Ω–µ–µ
  </a>

  <button class="btn btn-success btn-sm w-100 add-to-cart"
          data-product-id="{{ product.id }}">
    <i class="bi bi-cart-plus me-1"></i> –í –∫–æ—Ä–∑–∏–Ω—É
  </button>
</div>


        </div>

      </div>
    </div>
    {% endfor %}

  </div>

  {% else %}
  <div class="text-center py-5">
    <div class="empty-state">
      <i class="bi bi-box-seam display-1 text-muted"></i>
      <h3 class="mt-3 h4">–¢–æ–≤–∞—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
      <p class="text-muted">–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é –∏–ª–∏ —Ñ–∏–ª—å—Ç—Ä—ã</p>
    </div>
  </div>
  {% endif %}
</div>

{% endblock %}
